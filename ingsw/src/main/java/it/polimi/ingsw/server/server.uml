<?xml version="1.0" encoding="UTF-8"?>
<xmi:XMI xmi:version="20131001" xmlns:xmi="http://www.omg.org/spec/XMI/20131001" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:UMLLabProfile="http:///schemas/UMLLabProfile/NS/0" xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore" xmlns:uml="http://www.eclipse.org/uml2/5.0.0/UML" xsi:schemaLocation="http:///schemas/UMLLabProfile/NS/0 pathmap://UMLLAB_PROFILES/UMLLab.profile.uml#UMLLabProfile-Annotation_2-UMLLabProfile">
  <uml:Model xmi:id="_RLn1wA6SEeWoH8cK047h5w" name="server">
    <eAnnotations xmi:id="_RQiyAA6SEeWoH8cK047h5w" source="http://ns.yatta.de/umllab">
      <contents xmi:type="ecore:EAnnotation" xmi:id="_RQiyAQ6SEeWoH8cK047h5w" source="codegen">
        <details xmi:id="_RQiyAg6SEeWoH8cK047h5w" key="codegenDirectory" value="/ingsw/src/main/java"/>
        <details xmi:id="_RipOoA6SEeWoH8cK047h5w" key="AssociatedSourceCode" value="/ingsw/src/main/java/it/polimi/ingsw/server/Client.java;324726894/1;/ingsw/src/main/java/it/polimi/ingsw/server/ClientConn.java;1690045014/1;/ingsw/src/main/java/it/polimi/ingsw/server/ClientConnRMI.java;911037740/1;/ingsw/src/main/java/it/polimi/ingsw/server/ClientConnTCP.java;1084264756/1;/ingsw/src/main/java/it/polimi/ingsw/server/Main.java;148816650/1;/ingsw/src/main/java/it/polimi/ingsw/server/Listener.java;3050317084/1;/ingsw/src/main/java/it/polimi/ingsw/server/GameManager.java;2127546200/1;/ingsw/src/main/java/it/polimi/ingsw/server/Server.java;2306685423/1;/ingsw/src/main/java/it/polimi/ingsw/server/ServerRMI.java;3055684328/1;/ingsw/src/main/java/it/polimi/ingsw/server/ServerTCP.java;3829716740/1;"/>
      </contents>
    </eAnnotations>
    <elementImport xmi:id="_RcBCMA6SEeWoH8cK047h5w">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
    </elementImport>
    <elementImport xmi:id="_RcBCMQ6SEeWoH8cK047h5w">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#byte"/>
    </elementImport>
    <elementImport xmi:id="_RcBCMg6SEeWoH8cK047h5w">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#char"/>
    </elementImport>
    <elementImport xmi:id="_RcBCMw6SEeWoH8cK047h5w">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#double"/>
    </elementImport>
    <elementImport xmi:id="_RcBCNA6SEeWoH8cK047h5w">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#float"/>
    </elementImport>
    <elementImport xmi:id="_RcBCNQ6SEeWoH8cK047h5w">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
    </elementImport>
    <elementImport xmi:id="_RcBCNg6SEeWoH8cK047h5w">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#long"/>
    </elementImport>
    <elementImport xmi:id="_RcBCNw6SEeWoH8cK047h5w">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#short"/>
    </elementImport>
    <elementImport xmi:id="_RcBCOA6SEeWoH8cK047h5w">
      <importedElement xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
    </elementImport>
    <packagedElement xmi:type="uml:Package" xmi:id="_RbRbUA6SEeWoH8cK047h5w" name="it">
      <packagedElement xmi:type="uml:Package" xmi:id="_RbRbUQ6SEeWoH8cK047h5w" name="polimi">
        <packagedElement xmi:type="uml:Package" xmi:id="_RbRbUg6SEeWoH8cK047h5w" name="ingsw">
          <packagedElement xmi:type="uml:Package" xmi:id="_RbRbUw6SEeWoH8cK047h5w" name="game">
            <packagedElement xmi:type="uml:Package" xmi:id="_RbRbVA6SEeWoH8cK047h5w" name="network">
              <packagedElement xmi:type="uml:Class" xmi:id="_Rd4DYA6SEeWoH8cK047h5w" name="GameCommand"/>
              <packagedElement xmi:type="uml:Enumeration" xmi:id="_Rd4DYg6SEeWoH8cK047h5w" name="GameOpcode"/>
              <packagedElement xmi:type="uml:Enumeration" xmi:id="_Rd4DZA6SEeWoH8cK047h5w" name="CoreOpcode"/>
              <packagedElement xmi:type="uml:Interface" xmi:id="_Rd4DZg6SEeWoH8cK047h5w" name="Opcode"/>
              <packagedElement xmi:type="uml:Class" xmi:id="_ReBNVA6SEeWoH8cK047h5w" name="EnemyInfo"/>
              <packagedElement xmi:type="uml:Class" xmi:id="_ReBNVg6SEeWoH8cK047h5w" name="GameStartInfo"/>
              <packagedElement xmi:type="uml:Interface" xmi:id="_ReBNdg6SEeWoH8cK047h5w" name="ServerRMIMask"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Package" xmi:id="_RbRbWg6SEeWoH8cK047h5w" name="config">
              <packagedElement xmi:type="uml:Class" xmi:id="_Rd4DdQ6SEeWoH8cK047h5w" name="Config"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_ReBNUA6SEeWoH8cK047h5w" name="GameMap"/>
            <packagedElement xmi:type="uml:Class" xmi:id="_ReBNUg6SEeWoH8cK047h5w" name="GameState"/>
          </packagedElement>
          <packagedElement xmi:type="uml:Package" xmi:id="_RbRbWQ6SEeWoH8cK047h5w" name="server">
            <packagedElement xmi:type="uml:Class" xmi:id="_Rb3RMA6SEeWoH8cK047h5w" name="Client">
              <ownedComment xmi:id="_Rew0MA6SEeWoH8cK047h5w">
                <body>Player (connection) manager
@author Alain Carlucci (alain.carlucci@mail.polimi.it)
@since  May 8, 2015</body>
              </ownedComment>
              <ownedAttribute xmi:id="_ReUIZg6SEeWoH8cK047h5w" name="LOG" visibility="private" isLeaf="true" isStatic="true" type="_Rd4DbA6SEeWoH8cK047h5w" isReadOnly="true" association="_Rew0bQ6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_ReUIZw6SEeWoH8cK047h5w" value="Logger.getLogger(Client.class.getName())"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_ReUIaA6SEeWoH8cK047h5w" name="mConn" visibility="private" isLeaf="true" type="_RcBCRg6SEeWoH8cK047h5w" isReadOnly="true" association="_Rew0cA6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_ReUIag6SEeWoH8cK047h5w" name="mGame" visibility="private" isLeaf="true" type="_RcKzWw6SEeWoH8cK047h5w" isReadOnly="true" association="_Rew0cw6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_Red5QA6SEeWoH8cK047h5w" name="mUser" visibility="private">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5QQ6SEeWoH8cK047h5w" value="null"/>
              </ownedAttribute>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqTw6SEeWoH8cK047h5w" name="Client" specification="_Rd4Dbg6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqUA6SEeWoH8cK047h5w" name="conn" type="_RcBCRg6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_RenqUQ6SEeWoH8cK047h5w" name="game" type="_RcKzWw6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_RenqUg6SEeWoH8cK047h5w" type="_Rb3RMA6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>mConn = conn;
     mGame = game;

     /* Enable bidirectional communication Client &lt;-> ClientConn */
     mConn.setClient(this);  
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqUw6SEeWoH8cK047h5w" name="handlePacket" specification="_ReK-Ww6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqVA6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>if(!isConnected())
         return;
     
     if(!mGame.isRunning()) {
         try {
             Serializable[] args = pkt.getArgs();
             if(args == null || args.length == 0)
                 return;
             
             // Choosing username
             synchronized(mGame) {
                 if(pkt.getOpcode() instanceof CoreOpcode) {
                     CoreOpcode opcode = (CoreOpcode) pkt.getOpcode();
                     switch(opcode) {
                         case CMD_CS_USERNAME:
                             String name = (String) args[0];
                             if(mGame.canSetName(name) &amp;&amp; mUser == null) {
                                 setUsername(name);
                                 sendPacket(new GameCommand(CoreOpcode.CMD_SC_USEROK, mGame.getNumberOfClients(), mGame.getRemainingLoginTime()));
                             } else
                                 sendPacket(CoreOpcode.CMD_SC_USERFAIL);
                             break;
                         case CMD_CS_LOADMAP:
                             if(args.length == 1 &amp;&amp; args[0] instanceof Integer &amp;&amp; mGame.setMap(this, (Integer)args[0]))
                                 sendPacket(CoreOpcode.CMD_SC_MAPOK);
                             else
                                 sendPacket(CoreOpcode.CMD_SC_MAPFAIL);
                             break;
                         default:
                             break;
                     }
                 }
             }
         } catch( Exception e ) {
             LOG.log(Level.SEVERE, &quot;Unknown packet: &quot; + e.toString(), e);
         }
     } else
         mGame.handlePacket(this, pkt);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqVQ6SEeWoH8cK047h5w" name="sendPacket" specification="_ReK-Xw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqVg6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>if(!isConnected())
         throw new RuntimeException(&quot;You can't send data to an inactive client&quot;);
     
     mConn.sendPacket(pkt);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqVw6SEeWoH8cK047h5w" name="sendPacket" specification="_ReK-YQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqWA6SEeWoH8cK047h5w" name="opcode" type="_Rd4DZg6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>sendPacket(new GameCommand(opcode));
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqWQ6SEeWoH8cK047h5w" name="getUsername" specification="_RcBCOQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqWg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <language>java</language>
                <body>return mUser;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqWw6SEeWoH8cK047h5w" name="hasUsername" specification="_RcBCOw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqXA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if(mUser != null &amp;&amp; mUser.length() > 0)
         return true;
     return false;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqXQ6SEeWoH8cK047h5w" name="handleDisconnect" specification="_RcBCPQ6SEeWoH8cK047h5w">
                <language>java</language>
                <body>if(mConn.isConnected()) {
         mConn.disconnect();
         mGame.enqueueRemoveClient(this);
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqXg6SEeWoH8cK047h5w" name="setUsername" specification="_RcBCQA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqXw6SEeWoH8cK047h5w" name="username">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <language>java</language>
                <body>if(mUser != null)
         throw new RuntimeException(&quot;Username is already set&quot;);
     mUser = username;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqYA6SEeWoH8cK047h5w" name="update" specification="_RcBCQg6SEeWoH8cK047h5w">
                <language>java</language>
                <body>if(!isConnected())
         return;
     
     if(mConn.isTimeoutTimerElapsed()) {
         LOG.log(Level.WARNING, &quot;Ping timeout. Disconnecting.&quot;);
         handleDisconnect();
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqYQ6SEeWoH8cK047h5w" name="getConnection" specification="_RcBCQw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqYg6SEeWoH8cK047h5w" type="_RcBCRg6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>return mConn;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqYw6SEeWoH8cK047h5w" name="isConnected" specification="_RcBCRA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqZA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>return mConn.isConnected();
 </body>
              </ownedBehavior>
              <ownedOperation xmi:id="_RcBCOQ6SEeWoH8cK047h5w" name="getUsername" method="_RenqWQ6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0NQ6SEeWoH8cK047h5w">
                  <body>Get the player username
     * 
     * @return the username</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcBCOg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcBCOw6SEeWoH8cK047h5w" name="hasUsername" method="_RenqWw6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0Ng6SEeWoH8cK047h5w">
                  <body>Check if the player has a username
     * 
     * @return True if the username is set</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcBCPA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcBCPQ6SEeWoH8cK047h5w" name="handleDisconnect" method="_RenqXQ6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcBCPg6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcBCPw6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Nw6SEeWoH8cK047h5w">
                  <body>Disconnect the client</body>
                </ownedComment>
              </ownedOperation>
              <ownedOperation xmi:id="_RcBCQA6SEeWoH8cK047h5w" name="setUsername" method="_RenqXg6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0OA6SEeWoH8cK047h5w">
                  <body>Set a new username 
     * This method could be called only once
     *
     * @param username The new username</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcBCQQ6SEeWoH8cK047h5w" name="username">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcBCQg6SEeWoH8cK047h5w" name="update" method="_RenqYA6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0OQ6SEeWoH8cK047h5w">
                  <body>Update timeouts</body>
                </ownedComment>
              </ownedOperation>
              <ownedOperation xmi:id="_RcBCQw6SEeWoH8cK047h5w" name="getConnection" method="_RenqYQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Rd4DdA6SEeWoH8cK047h5w" type="_RcBCRg6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_RcBCRA6SEeWoH8cK047h5w" name="isConnected" method="_RenqYw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RcBCRQ6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_Rd4Dbg6SEeWoH8cK047h5w" name="Client" method="_RenqTw6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_Rd4DcQ6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_Rd4Dcg6SEeWoH8cK047h5w" key="create"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0MQ6SEeWoH8cK047h5w">
                  <body>The constructor
     * 
     * @param conn Connection to the client
     * @param game Game he is playing</body>
                </ownedComment>
                <ownedParameter xmi:id="_Rd4Dbw6SEeWoH8cK047h5w" name="conn" type="_RcBCRg6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_Rd4DcA6SEeWoH8cK047h5w" name="game" type="_RcKzWw6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_Rd4Dcw6SEeWoH8cK047h5w" type="_Rb3RMA6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReK-Ww6SEeWoH8cK047h5w" name="handlePacket" method="_RenqUw6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_ReK-XQ6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_ReK-Xg6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Mg6SEeWoH8cK047h5w">
                  <body>Handle a new incoming packet
     * 
     * @param pkt The packet</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReK-XA6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReK-Xw6SEeWoH8cK047h5w" name="sendPacket" method="_RenqVQ6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0Mw6SEeWoH8cK047h5w">
                  <body>Send a packet through the network
     * 
     * @param pkt The packet</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReK-YA6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReK-YQ6SEeWoH8cK047h5w" name="sendPacket" method="_RenqVw6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0NA6SEeWoH8cK047h5w">
                  <body>Send a packet without arguments through the network
     * 
     * @param opcode The opcode</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReK-Yg6SEeWoH8cK047h5w" name="opcode" type="_Rd4DZg6SEeWoH8cK047h5w"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_RcBCRg6SEeWoH8cK047h5w" name="ClientConn" isAbstract="true">
              <ownedComment xmi:id="_Rew0Og6SEeWoH8cK047h5w">
                <body>Common client connection interface 
@author Alain Carlucci (alain.carlucci@mail.polimi.it)
@since  May 8, 2015</body>
              </ownedComment>
              <ownedAttribute xmi:id="_Red5Qw6SEeWoH8cK047h5w" name="mClient" visibility="protected" type="_Rb3RMA6SEeWoH8cK047h5w" association="_Rew0dg6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5RA6SEeWoH8cK047h5w" value="null"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5Rg6SEeWoH8cK047h5w" name="mLastPingTime" visibility="protected">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#long"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5SA6SEeWoH8cK047h5w" name="mIsConnected" visibility="protected">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5SQ6SEeWoH8cK047h5w" value="false"/>
              </ownedAttribute>
              <interfaceRealization xmi:id="_ReK-Zg6SEeWoH8cK047h5w" client="_RcBCRg6SEeWoH8cK047h5w" supplier="_ReK-ZA6SEeWoH8cK047h5w" contract="_ReK-ZA6SEeWoH8cK047h5w"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqZQ6SEeWoH8cK047h5w" name="ClientConn" specification="_RcBCRw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqZg6SEeWoH8cK047h5w" type="_RcBCRg6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>resetTimeoutTimer();
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqZw6SEeWoH8cK047h5w" name="setClient" specification="_Rd4Ddw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqaA6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>if(mClient != null)
         throw new RuntimeException(&quot;This connection already has a client&quot;);
     mClient = client;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqaQ6SEeWoH8cK047h5w" name="isTimeoutTimerElapsed" specification="_RcBCSw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqag6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>return (System.currentTimeMillis() - mLastPingTime) > Config.SERVER_CONNECTION_TIMEOUT; 
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqaw6SEeWoH8cK047h5w" name="resetTimeoutTimer" specification="_RcBCTw6SEeWoH8cK047h5w">
                <language>java</language>
                <body>mLastPingTime = System.currentTimeMillis();
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqbA6SEeWoH8cK047h5w" name="isConnected" specification="_RcBCUw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqbQ6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>return mIsConnected;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqbg6SEeWoH8cK047h5w" name="sendPacket" specification="_ReK-aQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqbw6SEeWoH8cK047h5w" name="opcode" type="_Rd4DZg6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>sendPacket(new GameCommand(opcode));
 </body>
              </ownedBehavior>
              <ownedOperation xmi:id="_RcBCRw6SEeWoH8cK047h5w" name="ClientConn" method="_RenqZQ6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcBCSA6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcBCSQ6SEeWoH8cK047h5w" key="create"/>
                </eAnnotations>
                <ownedParameter xmi:id="_RcBCSg6SEeWoH8cK047h5w" type="_RcBCRg6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_RcBCSw6SEeWoH8cK047h5w" name="isTimeoutTimerElapsed" method="_RenqaQ6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcBCTA6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcBCTQ6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0PA6SEeWoH8cK047h5w">
                  <body>Check if the client is not responding (Ping timeout)
     * 
     * @return True if the client is not responding</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcBCTg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcBCTw6SEeWoH8cK047h5w" name="resetTimeoutTimer" method="_Renqaw6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcBCUA6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcBCUQ6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0PQ6SEeWoH8cK047h5w">
                  <body>Call this on a new incoming packet.</body>
                </ownedComment>
              </ownedOperation>
              <ownedOperation xmi:id="_RcBCUg6SEeWoH8cK047h5w" name="disconnect" isAbstract="true">
                <ownedComment xmi:id="_Rew0Pw6SEeWoH8cK047h5w">
                  <body>Close this connection</body>
                </ownedComment>
              </ownedOperation>
              <ownedOperation xmi:id="_RcBCUw6SEeWoH8cK047h5w" name="isConnected" method="_RenqbA6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0QA6SEeWoH8cK047h5w">
                  <body>Check if this client is connected
     * 
     * @return True if this client is online</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcBCVA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_Rd4Ddw6SEeWoH8cK047h5w" name="setClient" method="_RenqZw6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0Ow6SEeWoH8cK047h5w">
                  <body>Set a new client
     *
     * @param client The client</body>
                </ownedComment>
                <ownedParameter xmi:id="_Rd4DeA6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReK-Zw6SEeWoH8cK047h5w" name="sendPacket" isAbstract="true">
                <ownedComment xmi:id="_Rew0Pg6SEeWoH8cK047h5w">
                  <body>Send a packet through this socket
     * 
     * @param pkt The packet</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReK-aA6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReK-aQ6SEeWoH8cK047h5w" name="sendPacket" method="_Renqbg6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0QQ6SEeWoH8cK047h5w">
                  <body>Send a packet without arguments through this socket
     * 
     * @param opcode An opcode</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReK-ag6SEeWoH8cK047h5w" name="opcode" type="_Rd4DZg6SEeWoH8cK047h5w"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_RcBCVQ6SEeWoH8cK047h5w" name="ClientConnRMI">
              <ownedComment xmi:id="_Rew0Qg6SEeWoH8cK047h5w">
                <body>RMI Connection Handler
@author Alain Carlucci (alain.carlucci@mail.polimi.it)
@since  May 16, 2015</body>
              </ownedComment>
              <generalization xmi:id="_Rd4DhQ6SEeWoH8cK047h5w" general="_RcBCRg6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_Red5Sw6SEeWoH8cK047h5w" name="mOutgoingQueue" visibility="private" type="_Rd4DfQ6SEeWoH8cK047h5w" association="_Rew0eQ6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_Red5Tg6SEeWoH8cK047h5w" name="mUniqueId" visibility="private" isLeaf="true" isReadOnly="true">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5UA6SEeWoH8cK047h5w" name="mServer" visibility="private" isLeaf="true" type="_RcduIQ6SEeWoH8cK047h5w" isReadOnly="true" association="_Rew0fA6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_Red5Ug6SEeWoH8cK047h5w" name="mIsDisconnecting" visibility="private">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5Uw6SEeWoH8cK047h5w" value="false"/>
              </ownedAttribute>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqcA6SEeWoH8cK047h5w" name="ClientConnRMI" specification="_Rd4Dfw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqcQ6SEeWoH8cK047h5w" name="server" type="_RcduIQ6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_Renqcg6SEeWoH8cK047h5w" name="uniqueId">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <ownedParameter xmi:id="_Renqcw6SEeWoH8cK047h5w" type="_RcBCVQ6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>super();
     mIsConnected = true;
     mOutgoingQueue = new LinkedList&lt;GameCommand>();
     mUniqueId = uniqueId;
     mServer = server;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqdA6SEeWoH8cK047h5w" name="sendPacket" specification="_ReK-aw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqdQ6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>synchronized(mOutgoingQueue) {
         mOutgoingQueue.add(pkt);
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqdg6SEeWoH8cK047h5w" name="disconnect" specification="_RcKzNA6SEeWoH8cK047h5w">
                <language>java</language>
                <body>sendPacket(CoreOpcode.CMD_BYE);
     mIsDisconnecting = true;
     mIsConnected = false;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqdw6SEeWoH8cK047h5w" name="onRMICommand" specification="_ReUIQw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqeA6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>resetTimeoutTimer();
     if(mClient != null &amp;&amp; pkt != null &amp;&amp; !mIsDisconnecting)
         mClient.handlePacket(pkt);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqeQ6SEeWoH8cK047h5w" name="readCommands" specification="_RcKzOA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqeg6SEeWoH8cK047h5w" type="_Rd4DYA6SEeWoH8cK047h5w" direction="return">
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_Renqew6SEeWoH8cK047h5w" value="*"/>
                </ownedParameter>
                <language>java</language>
                <body>resetTimeoutTimer();
     
     // Last read with good bye message
     if(mIsDisconnecting)
         mServer.unregister(mUniqueId);
     
     synchronized(mOutgoingQueue) {
         if(mOutgoingQueue.isEmpty())
             return new GameCommand[0];
         GameCommand[] out = new GameCommand[mOutgoingQueue.size()];
         
         int i = 0;
         while(!mOutgoingQueue.isEmpty()) {
             GameCommand msg = mOutgoingQueue.poll();
             out[i++] = msg;
         }
         return out;
     }
 </body>
              </ownedBehavior>
              <ownedOperation xmi:id="_RcKzMA6SEeWoH8cK047h5w" name="run"/>
              <ownedOperation xmi:id="_RcKzNA6SEeWoH8cK047h5w" name="disconnect" method="_Renqdg6SEeWoH8cK047h5w"/>
              <ownedOperation xmi:id="_RcKzOA6SEeWoH8cK047h5w" name="readCommands" method="_RenqeQ6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0RQ6SEeWoH8cK047h5w">
                  <body>This method is called from a client 
     * 
     * @return A list of packets</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcKzOQ6SEeWoH8cK047h5w" type="_Rd4DYA6SEeWoH8cK047h5w" direction="return">
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_RcKzOg6SEeWoH8cK047h5w" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_Rd4Dfw6SEeWoH8cK047h5w" name="ClientConnRMI" method="_RenqcA6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_Rd4Dgg6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_Rd4Dgw6SEeWoH8cK047h5w" key="create"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Qw6SEeWoH8cK047h5w">
                  <body>The constructor
     * 
     * @param server    RMI Server listener
     * @param uniqueId  A unique Identifier</body>
                </ownedComment>
                <ownedParameter xmi:id="_Rd4DgA6SEeWoH8cK047h5w" name="server" type="_RcduIQ6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_Rd4DgQ6SEeWoH8cK047h5w" name="uniqueId">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <ownedParameter xmi:id="_Rd4DhA6SEeWoH8cK047h5w" type="_RcBCVQ6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReK-aw6SEeWoH8cK047h5w" name="sendPacket" method="_RenqdA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_ReK-bA6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReUIQw6SEeWoH8cK047h5w" name="onRMICommand" method="_Renqdw6SEeWoH8cK047h5w" raisedException="_Rd4DeQ6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0RA6SEeWoH8cK047h5w">
                  <body>This method is called on each received command
     * 
     * @param pkt The packet
     * @throws RemoteException</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReUIRA6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_RcKzPA6SEeWoH8cK047h5w" name="ClientConnTCP">
              <ownedComment xmi:id="_Rew0Rg6SEeWoH8cK047h5w">
                <body>TCP connection Handler
@author Alain Carlucci (alain.carlucci@mail.polimi.it)
@since  May 8, 2015</body>
              </ownedComment>
              <generalization xmi:id="_Rd4Djg6SEeWoH8cK047h5w" general="_RcBCRg6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_Red5VQ6SEeWoH8cK047h5w" name="LOG" visibility="private" isLeaf="true" isStatic="true" type="_Rd4DbA6SEeWoH8cK047h5w" isReadOnly="true" association="_Rew0fw6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5Vg6SEeWoH8cK047h5w" value="Logger.getLogger(ClientConnTCP.class.getName())"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5Vw6SEeWoH8cK047h5w" name="mOut" visibility="private" isLeaf="true" type="_Rd4Dig6SEeWoH8cK047h5w" isReadOnly="true" association="_Rew0gg6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_Red5WQ6SEeWoH8cK047h5w" name="mIn" visibility="private" isLeaf="true" type="_Rd4DiA6SEeWoH8cK047h5w" isReadOnly="true" association="_Rew0hQ6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_Red5Ww6SEeWoH8cK047h5w" name="mSocket" visibility="private" type="_Rd4DjA6SEeWoH8cK047h5w" association="_Rew0iA6SEeWoH8cK047h5w"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqfA6SEeWoH8cK047h5w" name="ClientConnTCP" specification="_ReUIRQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqfQ6SEeWoH8cK047h5w" name="socket" type="_Rd4DjA6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_Renqfg6SEeWoH8cK047h5w" type="_RcKzPA6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>mOut = new ObjectOutputStream(socket.getOutputStream());
     mIn = new ObjectInputStream(socket.getInputStream());
     mSocket = socket;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqfw6SEeWoH8cK047h5w" name="run" specification="_RcKzPQ6SEeWoH8cK047h5w">
                <language>java</language>
                <body>try {
         while(mSocket.isConnected()) {
             Object obj = mIn.readObject();
             if(obj != null &amp;&amp; mClient != null &amp;&amp; obj instanceof GameCommand) {
                 resetTimeoutTimer();
                 
                 if(((GameCommand)obj).getOpcode() == CoreOpcode.CMD_PING)
                 	continue;
                 mClient.handlePacket((GameCommand)obj);
             }
         }
     } catch(IOException | ClassNotFoundException e) {
         LOG.log(Level.FINE, &quot;Connection closed: &quot; + e.toString(), e);
     } finally {
         mClient.handleDisconnect();
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqgA6SEeWoH8cK047h5w" name="sendPacket" specification="_ReUISg6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqgQ6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>try {
         mOut.writeObject(pkt);
         mOut.flush();
     } catch (IOException e) {
         LOG.log(Level.FINEST, e.toString(), e);
         mClient.handleDisconnect();
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqgg6SEeWoH8cK047h5w" name="disconnect" specification="_RcKzQQ6SEeWoH8cK047h5w">
                <language>java</language>
                <body>if(mOut != null) {
         try {
             mOut.writeObject(new GameCommand(CoreOpcode.CMD_BYE));
             mOut.flush();
         } catch(IOException e) {
             LOG.log(Level.FINER, e.toString(), e);
         }
     }
     try {
         mOut.close();
         mIn.close();
         mSocket.close();
     } catch (IOException e) {
         LOG.log(Level.FINE, &quot;Sockets are already closed: &quot; + e.toString(), e);
     }
     
     mSocket = null;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqgw6SEeWoH8cK047h5w" name="isConnected" specification="_RcKzRw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqhA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if(mSocket == null)
         return false;
     return mSocket.isConnected();
 </body>
              </ownedBehavior>
              <ownedOperation xmi:id="_RcKzPQ6SEeWoH8cK047h5w" name="run" method="_Renqfw6SEeWoH8cK047h5w"/>
              <ownedOperation xmi:id="_RcKzQQ6SEeWoH8cK047h5w" name="disconnect" method="_Renqgg6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcKzQg6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcKzQw6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
              </ownedOperation>
              <ownedOperation xmi:id="_RcKzRw6SEeWoH8cK047h5w" name="isConnected" method="_Renqgw6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcKzSA6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcKzSQ6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedParameter xmi:id="_RcKzSg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_ReUIRQ6SEeWoH8cK047h5w" name="ClientConnTCP" method="_RenqfA6SEeWoH8cK047h5w" raisedException="_Rd4Dhg6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_ReUIRw6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_ReUISA6SEeWoH8cK047h5w" key="create"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Rw6SEeWoH8cK047h5w">
                  <body>Constructor
     * 
     * @param socket        Socket to bind
     * @throws IOException  Socket errors</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReUIRg6SEeWoH8cK047h5w" name="socket" type="_Rd4DjA6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_ReUISQ6SEeWoH8cK047h5w" type="_RcKzPA6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReUISg6SEeWoH8cK047h5w" name="sendPacket" method="_RenqgA6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_ReUITA6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_ReUITQ6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedParameter xmi:id="_ReUISw6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_RcKzTg6SEeWoH8cK047h5w" name="Main">
              <ownedComment xmi:id="_Rew0SA6SEeWoH8cK047h5w">
                <body>Server Main

@author Alain Carlucci (alain.carlucci@mail.polimi.it)
@since  May 8, 2015</body>
              </ownedComment>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqhQ6SEeWoH8cK047h5w" name="main" specification="_RcKzVA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqhg6SEeWoH8cK047h5w" name="args">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_Renqhw6SEeWoH8cK047h5w" value="*"/>
                </ownedParameter>
                <language>java</language>
                <body>Server.getInstance().runServer();
 </body>
              </ownedBehavior>
              <ownedOperation xmi:id="_RcKzTw6SEeWoH8cK047h5w" name="Main" visibility="private">
                <eAnnotations xmi:id="_RcKzUA6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcKzUQ6SEeWoH8cK047h5w" key="create"/>
                </eAnnotations>
                <ownedParameter xmi:id="_RcKzUw6SEeWoH8cK047h5w" type="_RcKzTg6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_RcKzVA6SEeWoH8cK047h5w" name="main" isStatic="true" method="_RenqhQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RcKzVQ6SEeWoH8cK047h5w" name="args">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_RcKzVg6SEeWoH8cK047h5w" value="*"/>
                </ownedParameter>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Interface" xmi:id="_RcKzVw6SEeWoH8cK047h5w" name="Listener">
              <ownedComment xmi:id="_Rew0SQ6SEeWoH8cK047h5w">
                <body>Common server listeners interface
@author Alain Carlucci (alain.carlucci@mail.polimi.it)
@since  May 18, 2015</body>
              </ownedComment>
              <generalization xmi:id="_ReUIUQ6SEeWoH8cK047h5w" general="_ReK-ZA6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_RcKzWQ6SEeWoH8cK047h5w" name="down" isReadOnly="true">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_RcKzWg6SEeWoH8cK047h5w" name="up" isReadOnly="true">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
              </ownedAttribute>
              <ownedOperation xmi:id="_RcKzWA6SEeWoH8cK047h5w" name="tearDown">
                <ownedComment xmi:id="_Rew0Sg6SEeWoH8cK047h5w">
                  <body>Shut down the server</body>
                </ownedComment>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_RcKzWw6SEeWoH8cK047h5w" name="GameManager">
              <ownedComment xmi:id="_Rew0Sw6SEeWoH8cK047h5w">
                <body>Game manager
@author Alain Carlucci (alain.carlucci@mail.polimi.it)
@since  May 9, 2015</body>
              </ownedComment>
              <ownedAttribute xmi:id="_Red5XQ6SEeWoH8cK047h5w" name="LOG" visibility="private" isLeaf="true" isStatic="true" type="_Rd4DbA6SEeWoH8cK047h5w" isReadOnly="true" association="_Rew0iw6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5Xg6SEeWoH8cK047h5w" value="Logger.getLogger(GameManager.class.getName())"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5Xw6SEeWoH8cK047h5w" name="mIsRunning" visibility="private">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5YA6SEeWoH8cK047h5w" value="false"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5Yg6SEeWoH8cK047h5w" name="mStartTime" visibility="private" isLeaf="true" isReadOnly="true">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#long"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5ZA6SEeWoH8cK047h5w" name="mClients" visibility="private" type="_Rb3RMA6SEeWoH8cK047h5w" isOrdered="true" association="_Rew0jg6SEeWoH8cK047h5w">
                <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_Red5ZQ6SEeWoH8cK047h5w" value="*"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5Zg6SEeWoH8cK047h5w" value="new ArrayList&lt;Client>()"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5aA6SEeWoH8cK047h5w" name="mChosenMapId" visibility="private">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5aQ6SEeWoH8cK047h5w" value="null"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5aw6SEeWoH8cK047h5w" name="mState" visibility="private" type="_ReBNUg6SEeWoH8cK047h5w" association="_Rew0kQ6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5bA6SEeWoH8cK047h5w" value="null"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5bg6SEeWoH8cK047h5w" name="mAwayClients" visibility="private">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5bw6SEeWoH8cK047h5w" value="0"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5cQ6SEeWoH8cK047h5w" name="mClientsToRemove" visibility="private" type="_Rd4DfQ6SEeWoH8cK047h5w" association="_Rew0lA6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5cw6SEeWoH8cK047h5w" value="new LinkedList&lt;Client>()"/>
              </ownedAttribute>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqiA6SEeWoH8cK047h5w" name="GameManager" specification="_RcT9IA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqiQ6SEeWoH8cK047h5w" type="_RcKzWw6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>mStartTime = System.currentTimeMillis();
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqig6SEeWoH8cK047h5w" name="addPlayer" specification="_ReBNXg6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqiw6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_RenqjA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if(mIsRunning || mClients.size() >= Config.GAME_MAX_PLAYERS)
         return false;

     mClients.add(client);
     client.sendPacket(new GameCommand(CoreOpcode.CMD_SC_TIME, (Integer) getRemainingLoginTime()));
     client.sendPacket(CoreOpcode.CMD_SC_CHOOSEUSER);
     broadcastPacket(new GameCommand(CoreOpcode.CMD_SC_STAT, (Integer) mClients.size()));
     
     // @first client: ask for map
     if(mClients.size() == 1)
         askForMap(client);

     return true;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqjQ6SEeWoH8cK047h5w" name="isFull" specification="_RcT9JA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqjg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>return mClients.size() >= Config.GAME_MAX_PLAYERS;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqjw6SEeWoH8cK047h5w" name="isReady" specification="_RcT9KA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqkA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if((getRemainingLoginTime() == 0 &amp;&amp; mClients.size() >= Config.GAME_MIN_PLAYERS) || mClients.size() == Config.GAME_MAX_PLAYERS)
         return true;
     
     if(mIsRunning)
         return true;
     
     return false;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqkQ6SEeWoH8cK047h5w" name="isRunning" specification="_RcT9LA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqkg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>return mIsRunning;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqkw6SEeWoH8cK047h5w" name="getNumberOfClients" specification="_RcT9MA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqlA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
                <language>java</language>
                <body>return mClients.size();
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqlQ6SEeWoH8cK047h5w" name="getRemainingLoginTime" specification="_RcT9NA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqlg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
                <language>java</language>
                <body>long rem = Config.GAME_WAITING_SECS - (System.currentTimeMillis() - mStartTime)/1000;
     return (int)rem > 0 ? (int)rem : 0;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqlw6SEeWoH8cK047h5w" name="canSetName" specification="_RcT9OA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqmA6SEeWoH8cK047h5w" name="name">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <ownedParameter xmi:id="_RenqmQ6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if(name == null)
         return false;
     
     for(Client c : mClients) {
         if(name.equalsIgnoreCase(c.getUsername()))
             return false;
     } 
     return true;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqmg6SEeWoH8cK047h5w" name="update" specification="_RcT9PQ6SEeWoH8cK047h5w">
                <language>java</language>
                <body>// check connection for every client
     for(Client c : mClients)
         if(c != null)
             c.update();
     
     // remove client if needed
     while(!mClientsToRemove.isEmpty()) {
         Client c = mClientsToRemove.remove();
         removeClient(c);
     }
     
     if(!mIsRunning) {
         int mFinalConnClients = 0;
         // Game is ready but it is not running 
         for(Client client : mClients) {
             if(!client.isConnected())
                 throw new RuntimeException(&quot;Client can't be inactive before the game is started. What's happening?&quot;);
             
             if(!client.hasUsername()) {
                 // Some slow users still haven't typed their name
                 return;
             }
             mFinalConnClients++;
         }
         
         // map not chosen yet
         if(mChosenMapId == null)
             return;
         
         // game is ready to start
         if(mFinalConnClients >= Config.GAME_MIN_PLAYERS)
             startGame();
         else
             shutdown();
     } else {
         if(mState != null)
             // update game
             mState.update();
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqmw6SEeWoH8cK047h5w" name="startGame" specification="_RcT9QA6SEeWoH8cK047h5w">
                <language>java</language>
                <body>// Let the game begin
     LOG.log(Level.INFO, &quot;Players ready! Rolling the dice and starting up...&quot;);

     Collections.shuffle(mClients);
     
     mState = new GameState(this, mChosenMapId);
     
     LOG.log(Level.INFO, mClients.get(0).getUsername() + &quot; is the first player&quot;);
     
     // Send infos to all players
     EnemyInfo[] userList = new EnemyInfo[mClients.size()];
     
     for(int i = 0; i &lt; mClients.size(); i++)
         userList[i] = new EnemyInfo(mClients.get(i).getUsername());
     
     for(int i = 0; i &lt; mClients.size(); i++) {
         GameStartInfo info = mState.buildInfoContainer(userList, i);
         mClients.get(i).sendPacket(new GameCommand(CoreOpcode.CMD_SC_RUN, info));
     }

     mIsRunning = true;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqnA6SEeWoH8cK047h5w" name="broadcastPacket" specification="_ReUIUg6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqnQ6SEeWoH8cK047h5w" name="opcode" type="_Rd4DYg6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>for(Client c : mClients)
         if(c.isConnected())
             c.sendPacket(opcode);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqng6SEeWoH8cK047h5w" name="broadcastPacket" specification="_ReUIVA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqnw6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>for(Client c : mClients)
         if(c.isConnected())
             c.sendPacket(pkt);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqoA6SEeWoH8cK047h5w" name="removeClient" specification="_ReBNYw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqoQ6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>boolean mustAskForMap = false;
     int index = mClients.indexOf(client);
     if(index == 0 &amp;&amp; mChosenMapId == null)
         mustAskForMap = true;
     
     // DO NOT REMOVE THE CLIENT IF THE GAME IS RUNNING.
     if(mIsRunning)
         mAwayClients++;
     else
         if(mClients.remove(index) == null)
             throw new RuntimeException(&quot;Are you trying to remove a non-existent client?&quot;);
     
     if(mAwayClients > getNumberOfClients())
         throw new RuntimeException(&quot;AwayClients >= ConnectedClients. What's Happening?&quot;);
     
     // Decrement global user counter
     Server.getInstance().removeClient();
     
     broadcastPacket(new GameCommand(CoreOpcode.CMD_SC_STAT, getNumberOfClients() - mAwayClients));
     
     // FIXME: Could be possible that a client joins the game while enqueued for removal?
     if(getNumberOfClients() - mAwayClients == 0)
         Server.getInstance().enqueueRemoveGame(this);

     boolean canAskAtLeastOne = false;
     // Game is still alive
     if(mustAskForMap &amp;&amp; !mClients.isEmpty()) {
         for(Client c : mClients)
             if(c.isConnected()) {
                 askForMap(c);
                 canAskAtLeastOne = true;
                 break;
             }
     }
     
     if((mIsRunning &amp;&amp; mState != null) || (!canAskAtLeastOne &amp;&amp; mustAskForMap))
         mState.onPlayerDisconnect(index);
     
     LOG.log(Level.INFO, &quot;Player disconnected. Game Running? &quot; + String.valueOf(mIsRunning) + &quot;. Clients connected: &quot; + (getNumberOfClients() - mAwayClients));
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqog6SEeWoH8cK047h5w" name="enqueueRemoveClient" specification="_ReBNZQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqow6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>synchronized(mClientsToRemove) {
         if(!mClientsToRemove.contains(client))
             mClientsToRemove.add(client);
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqpA6SEeWoH8cK047h5w" name="askForMap" specification="_ReBNZw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqpQ6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>GameCommand pkt;
     
     if(!client.isConnected())
         throw new RuntimeException(&quot;I am trying to ask a map to an inactive client. What's happening?&quot;);
     pkt = new GameCommand(CoreOpcode.CMD_SC_CHOOSEMAP, (Serializable[]) GameMap.getListOfMaps());
     client.sendPacket(pkt);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqpg6SEeWoH8cK047h5w" name="handlePacket" specification="_ReUIWA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqpw6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_RenqqA6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>if(!mIsRunning)
         LOG.log(Level.SEVERE, &quot;Game is not started yet. What's happening?&quot;);
     
     if(mState == null)
     	return;
     
     int turnId = mState.getTurnId();
     if(turnId >=0 &amp;&amp; turnId &lt;= mClients.size() &amp;&amp; mClients.get(turnId).equals(client)) {
         if(!mClients.get(turnId).isConnected())
             throw new RuntimeException(&quot;GameState is broken: mTurnId -> AwayPlayer. What's happening?&quot;);
         mState.enqueuePacket(pkt);
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqqQ6SEeWoH8cK047h5w" name="setMap" specification="_ReBNaQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqqg6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_Renqqw6SEeWoH8cK047h5w" name="chosenMap">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
                </ownedParameter>
                <ownedParameter xmi:id="_RenqrA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if(mChosenMapId != null)
         return false;
     
     if(mClients.size() > 0 &amp;&amp; mClients.get(0).equals(client) &amp;&amp; GameMap.isValidMap(chosenMap)) {
         mChosenMapId = chosenMap;
         return true;
     }
     
     return false;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqrQ6SEeWoH8cK047h5w" name="getPlayerConnection" specification="_RcT9QQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqrg6SEeWoH8cK047h5w" name="i">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
                <ownedParameter xmi:id="_Renqrw6SEeWoH8cK047h5w" type="_Rb3RMA6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>return mClients.get(i);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqsA6SEeWoH8cK047h5w" name="sendDirectPacket" specification="_ReUIWw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqsQ6SEeWoH8cK047h5w" name="id">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
                <ownedParameter xmi:id="_Renqsg6SEeWoH8cK047h5w" name="networkPacket" type="_Rd4DYA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>LOG.log(Level.FINE, &quot;Sending packet to &quot; + id + &quot;: &quot; + networkPacket.getOpcode().toString());
 	Client c = mClients.get(id); 
 	if(c.isConnected())
 	    c.sendPacket(networkPacket);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqsw6SEeWoH8cK047h5w" name="getGameState" specification="_RcT9Qw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqtA6SEeWoH8cK047h5w" type="_ReBNUg6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>return mState;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqtQ6SEeWoH8cK047h5w" name="shutdown" specification="_RcT9RA6SEeWoH8cK047h5w">
                <language>java</language>
                <body>for(Client c : mClients)
		    if(c.isConnected())
		        c.handleDisconnect();
		
		Server.getInstance().enqueueRemoveGame(this);
	</body>
              </ownedBehavior>
              <ownedOperation xmi:id="_RcT9IA6SEeWoH8cK047h5w" name="GameManager" method="_RenqiA6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9IQ6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9Ig6SEeWoH8cK047h5w" key="create"/>
                </eAnnotations>
                <ownedParameter xmi:id="_RcT9Iw6SEeWoH8cK047h5w" type="_RcKzWw6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9JA6SEeWoH8cK047h5w" name="isFull" method="_RenqjQ6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9JQ6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9Jg6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0TQ6SEeWoH8cK047h5w">
                  <body>Check if number of players is greater or equal to the maximum number of players per game
     * 
     * @return True if this game is full</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcT9Jw6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9KA6SEeWoH8cK047h5w" name="isReady" method="_Renqjw6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9KQ6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9Kg6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Tg6SEeWoH8cK047h5w">
                  <body>Check if the game is ready to start and can't accept new connections
     * 
     * @return True if the game is ready to start</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcT9Kw6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9LA6SEeWoH8cK047h5w" name="isRunning" method="_RenqkQ6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9LQ6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9Lg6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Tw6SEeWoH8cK047h5w">
                  <body>Check if the game is running
     * 
     * @return True if the game is running (new players can't join)</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcT9Lw6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9MA6SEeWoH8cK047h5w" name="getNumberOfClients" method="_Renqkw6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9MQ6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9Mg6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0UA6SEeWoH8cK047h5w">
                  <body>Get number of connected players
     * 
     * @return Number of connected players</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcT9Mw6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9NA6SEeWoH8cK047h5w" name="getRemainingLoginTime" method="_RenqlQ6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9NQ6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9Ng6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0UQ6SEeWoH8cK047h5w">
                  <body>Get how many seconds are left before the game starts
     * 
     * @return Remaining time</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcT9Nw6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9OA6SEeWoH8cK047h5w" name="canSetName" method="_Renqlw6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9Og6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9Ow6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Ug6SEeWoH8cK047h5w">
                  <body>Check if a player can set the name he wants
     * 
     * @param name      The name
     * @return          True if the player can set this name</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcT9OQ6SEeWoH8cK047h5w" name="name">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <ownedParameter xmi:id="_RcT9PA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9PQ6SEeWoH8cK047h5w" name="update" method="_Renqmg6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9Pg6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9Pw6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Uw6SEeWoH8cK047h5w">
                  <body>This method is called on each game update cycle
     * @todo notify users about someone without username
     * @todo generate a random username if someone won't choose it</body>
                </ownedComment>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9QA6SEeWoH8cK047h5w" name="startGame" visibility="private" method="_Renqmw6SEeWoH8cK047h5w"/>
              <ownedOperation xmi:id="_RcT9QQ6SEeWoH8cK047h5w" name="getPlayerConnection" method="_RenqrQ6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0Ww6SEeWoH8cK047h5w">
                  <body>Get a connection object
     * 
     * @param i Connection id
     * @return</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcT9Qg6SEeWoH8cK047h5w" name="i">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
                <ownedParameter xmi:id="_ReBNbQ6SEeWoH8cK047h5w" type="_Rb3RMA6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9Qw6SEeWoH8cK047h5w" name="getGameState" method="_Renqsw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_ReUIXg6SEeWoH8cK047h5w" type="_ReBNUg6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9RA6SEeWoH8cK047h5w" name="shutdown" method="_RenqtQ6SEeWoH8cK047h5w"/>
              <ownedOperation xmi:id="_ReBNXg6SEeWoH8cK047h5w" name="addPlayer" method="_Renqig6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_ReBNYA6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_ReBNYQ6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0TA6SEeWoH8cK047h5w">
                  <body>Add new clients to this game
     * 
     * @param client    New client instance
     * @return          True if the player is added correctly</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReBNXw6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_ReBNYg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_ReBNYw6SEeWoH8cK047h5w" name="removeClient" visibility="private" method="_RenqoA6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0Vg6SEeWoH8cK047h5w">
                  <body>Do not call this guy directly! Use enqueueRemoveGame.
     * Remove a client from this game, but if this method is called inside
     * a for(Client c : mClients) will throw an exception.
     * 
     * @param client The client</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReBNZA6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReBNZQ6SEeWoH8cK047h5w" name="enqueueRemoveClient" method="_Renqog6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0Vw6SEeWoH8cK047h5w">
                  <body>Remove a client from the game
     * @param client The client</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReBNZg6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReBNZw6SEeWoH8cK047h5w" name="askForMap" visibility="private" method="_RenqpA6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0WA6SEeWoH8cK047h5w">
                  <body>Ask to client which map to use
     * 
     * @param client The client</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReBNaA6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReBNaQ6SEeWoH8cK047h5w" name="setMap" method="_RenqqQ6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0Wg6SEeWoH8cK047h5w">
                  <body>Save the map chosen by the first player
     * 
     * @param client The player
     * @param chosenMap The chosen map
     * @return True if the choice is valid</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReBNag6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_ReBNaw6SEeWoH8cK047h5w" name="chosenMap">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
                </ownedParameter>
                <ownedParameter xmi:id="_ReBNbA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_ReUIUg6SEeWoH8cK047h5w" name="broadcastPacket" method="_RenqnA6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0VA6SEeWoH8cK047h5w">
                  <body>Send a packet without arguments to all players connected
     * 
     * @param opcode Packet opcode</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReUIUw6SEeWoH8cK047h5w" name="opcode" type="_Rd4DYg6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReUIVA6SEeWoH8cK047h5w" name="broadcastPacket" method="_Renqng6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_ReUIVg6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_ReUIVw6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0VQ6SEeWoH8cK047h5w">
                  <body>Send a packet to all players connected
     * 
     * @param pkt Packet</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReUIVQ6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReUIWA6SEeWoH8cK047h5w" name="handlePacket" method="_Renqpg6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0WQ6SEeWoH8cK047h5w">
                  <body>@param client
     * @param pkt</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReUIWQ6SEeWoH8cK047h5w" name="client" type="_Rb3RMA6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_ReUIWg6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <ownedOperation xmi:id="_ReUIWw6SEeWoH8cK047h5w" name="sendDirectPacket" method="_RenqsA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_ReUIXA6SEeWoH8cK047h5w" name="id">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
                <ownedParameter xmi:id="_ReUIXQ6SEeWoH8cK047h5w" name="networkPacket" type="_Rd4DYA6SEeWoH8cK047h5w"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_RcT9RQ6SEeWoH8cK047h5w" name="Server">
              <ownedComment xmi:id="_Rew0XA6SEeWoH8cK047h5w">
                <body>The server

@author Alain Carlucci (alain.carlucci@mail.polimi.it)
@since  May 8, 2015</body>
              </ownedComment>
              <ownedAttribute xmi:id="_Red5dQ6SEeWoH8cK047h5w" name="LOG" visibility="private" isLeaf="true" isStatic="true" type="_Rd4DbA6SEeWoH8cK047h5w" isReadOnly="true" association="_Rew0lw6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5dg6SEeWoH8cK047h5w" value="Logger.getLogger(Server.class.getName())"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5eQ6SEeWoH8cK047h5w" name="mServers" visibility="private" isLeaf="true" type="_RcKzVw6SEeWoH8cK047h5w" isOrdered="true" isReadOnly="true" association="_Re6lNA6SEeWoH8cK047h5w">
                <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_Red5eg6SEeWoH8cK047h5w" value="*"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5fA6SEeWoH8cK047h5w" name="mGamesRunning" visibility="private" isLeaf="true" type="_RcKzWw6SEeWoH8cK047h5w" isOrdered="true" isReadOnly="true" association="_Re6lNw6SEeWoH8cK047h5w">
                <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_Red5fQ6SEeWoH8cK047h5w" value="*"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5fw6SEeWoH8cK047h5w" name="mConnectedClients" visibility="private">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#Integer"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5gQ6SEeWoH8cK047h5w" name="mStopEvent" visibility="private">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5gg6SEeWoH8cK047h5w" value="false"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5hA6SEeWoH8cK047h5w" name="mCurGame" visibility="private" type="_RcKzWw6SEeWoH8cK047h5w" association="_Re6lOg6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5hQ6SEeWoH8cK047h5w" value="null"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5hw6SEeWoH8cK047h5w" name="mGamesToRemove" visibility="private" type="_Rd4DfQ6SEeWoH8cK047h5w" association="_Re6lPQ6SEeWoH8cK047h5w"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqtg6SEeWoH8cK047h5w" name="getInstance" specification="_RcT9SQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqtw6SEeWoH8cK047h5w" type="_RcT9RQ6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>return Holder.INSTANCE;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenquA6SEeWoH8cK047h5w" name="Server" specification="_RcT9Sg6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenquQ6SEeWoH8cK047h5w" type="_RcT9RQ6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>mServers = new ArrayList&lt;Listener>();
     mGamesRunning = new ArrayList&lt;GameManager>();
     mGamesToRemove = new LinkedList&lt;GameManager>();
     mConnectedClients = 0;

     ServerTCP tcp = new ServerTCP(Config.SERVER_TCP_LISTEN_PORT);
     ServerRMI rmi = new ServerRMI();

     mServers.add(tcp);
     mServers.add(rmi);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqug6SEeWoH8cK047h5w" name="addClient" specification="_ReBNbw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renquw6SEeWoH8cK047h5w" name="conn" type="_RcBCRg6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_RenqvA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>// Invariant: mCurGame cannot be full here
     
     if(mConnectedClients >= Config.SERVER_MAX_CLIENTS) {
         conn.sendPacket(CoreOpcode.CMD_SC_FULL);
         return false;
     }
     
     mConnectedClients++;
 
     if(mCurGame == null) {
         mCurGame = new GameManager();
     }

     Client client = new Client(conn,mCurGame);

     if(!mCurGame.addPlayer(client)) {
         // No game may be full here
         client.handleDisconnect();
         return false;
     }

     synchronized(mGamesRunning) {
         if(mCurGame != null &amp;&amp; mCurGame.isFull()) {
             mGamesRunning.add(mCurGame);
             mCurGame = null;
         } 
     }
     
     return true;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqvQ6SEeWoH8cK047h5w" name="removeClient" specification="_RcT9Tg6SEeWoH8cK047h5w">
                <language>java</language>
                <body>if(mConnectedClients > 0)
         mConnectedClients--;
     else
         throw new RuntimeException(&quot;0 Clients connected. What's Happening?&quot;);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqvg6SEeWoH8cK047h5w" name="enqueueRemoveGame" specification="_ReBNdA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqvw6SEeWoH8cK047h5w" name="game" type="_RcKzWw6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>synchronized(mGamesRunning) {
         if(mCurGame != null &amp;&amp; game.equals(mCurGame))
             mCurGame = null;
         else {
             if(!mGamesToRemove.contains(game))
                 mGamesToRemove.add(game);
         }
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqwA6SEeWoH8cK047h5w" name="runServer" specification="_RcT9UQ6SEeWoH8cK047h5w">
                <language>java</language>
                <body>LOG.log(Level.FINE, &quot;Starting up...&quot;);
     for(Listener server : mServers)
         new Thread(server).start();

     try {
         while(!mStopEvent) {
             if(mCurGame != null) {
                 if(mCurGame.isReady()) {
                     LOG.log(Level.INFO, &quot;Game ready! Stopping new incoming connections&quot;);
                     synchronized(mGamesRunning) {
                         mGamesRunning.add(mCurGame);
                     }
                     mCurGame = null;
                 }
             }

             synchronized(mGamesRunning) {
                 for (GameManager g : mGamesRunning)
                     g.update();
                 
                 while(!mGamesToRemove.isEmpty()) {
                 	GameManager g = mGamesToRemove.remove();
                 	mGamesRunning.remove(g);
                 }
             }
             
             Thread.sleep(100);
         }
     } catch (InterruptedException e) {
         LOG.log(Level.FINER, e.toString(), e);
     }
     
     for(Listener server : mServers)
         server.tearDown();
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqwQ6SEeWoH8cK047h5w" name="getConnectedClients" specification="_RcT9Ug6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqwg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
                <language>java</language>
                <body>return mConnectedClients;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqww6SEeWoH8cK047h5w" name="tearDown" specification="_RcT9Vg6SEeWoH8cK047h5w">
                <language>java</language>
                <body>mStopEvent = true;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqxA6SEeWoH8cK047h5w" name="isDown" specification="_RcT9WQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqxQ6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if(mServers != null)
         for(Listener server : mServers)
             if(!server.isDown())
                 return false;
     return true;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqxg6SEeWoH8cK047h5w" name="isUp" specification="_RcT9XQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqxw6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if(mServers == null)
         return false;
     
     for(Listener server : mServers)
         if(!server.isUp())
             return false;
     return true;
 </body>
              </ownedBehavior>
              <ownedOperation xmi:id="_RcT9SQ6SEeWoH8cK047h5w" name="getInstance" isStatic="true" method="_Renqtg6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0Xg6SEeWoH8cK047h5w">
                  <body>Returns the current server instance
     * 
     * @return The instance</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReBNbg6SEeWoH8cK047h5w" type="_RcT9RQ6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9Sg6SEeWoH8cK047h5w" name="Server" visibility="private" method="_RenquA6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9Sw6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9TA6SEeWoH8cK047h5w" key="create"/>
                </eAnnotations>
                <ownedParameter xmi:id="_RcT9TQ6SEeWoH8cK047h5w" type="_RcT9RQ6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9Tg6SEeWoH8cK047h5w" name="removeClient" method="_RenqvQ6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9Tw6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9UA6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0YA6SEeWoH8cK047h5w">
                  <body>Decrement client counter</body>
                </ownedComment>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9UQ6SEeWoH8cK047h5w" name="runServer" method="_RenqwA6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0Yg6SEeWoH8cK047h5w">
                  <body>Start the server and put listeners online.</body>
                </ownedComment>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9Ug6SEeWoH8cK047h5w" name="getConnectedClients" method="_RenqwQ6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9Uw6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9VA6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Yw6SEeWoH8cK047h5w">
                  <body>Get number of connected clients
     * 
     * @return Number of connected clients</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcT9VQ6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9Vg6SEeWoH8cK047h5w" name="tearDown" method="_Renqww6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9Vw6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9WA6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0ZA6SEeWoH8cK047h5w">
                  <body>Shut down the server</body>
                </ownedComment>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9WQ6SEeWoH8cK047h5w" name="isDown" method="_RenqxA6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9Wg6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9Ww6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0ZQ6SEeWoH8cK047h5w">
                  <body>Check if the server is shutted down
     * 
     * @return True if the server is correctly shutted down</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcT9XA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcT9XQ6SEeWoH8cK047h5w" name="isUp" method="_Renqxg6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcT9Xg6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9Xw6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Zg6SEeWoH8cK047h5w">
                  <body>Check if the server is correctly started up
     * 
     * @return True if the server is up and running</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcduIA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_ReBNbw6SEeWoH8cK047h5w" name="addClient" method="_Renqug6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_ReBNcQ6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_ReBNcg6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0Xw6SEeWoH8cK047h5w">
                  <body>New client connected: call this method to add him in a new game
     * 
     * @param conn  The client connection
     * @return      True if the client is correctly added in a game</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReBNcA6SEeWoH8cK047h5w" name="conn" type="_RcBCRg6SEeWoH8cK047h5w"/>
                <ownedParameter xmi:id="_ReBNcw6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_ReBNdA6SEeWoH8cK047h5w" name="enqueueRemoveGame" method="_Renqvg6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0YQ6SEeWoH8cK047h5w">
                  <body>Removes a game from the games-to-update list 
     * 
     * @param game  Game you want to remove</body>
                </ownedComment>
                <ownedParameter xmi:id="_ReBNdQ6SEeWoH8cK047h5w" name="game" type="_RcKzWw6SEeWoH8cK047h5w"/>
              </ownedOperation>
              <nestedClassifier xmi:type="uml:Class" xmi:id="_RcT9Rg6SEeWoH8cK047h5w" name="Holder" visibility="private">
                <eAnnotations xmi:id="_RcT9Rw6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcT9SA6SEeWoH8cK047h5w" key="static"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0XQ6SEeWoH8cK047h5w">
                  <body>Singleton Holder</body>
                </ownedComment>
                <ownedAttribute xmi:id="_Red5dw6SEeWoH8cK047h5w" name="INSTANCE" visibility="private" isLeaf="true" isStatic="true" type="_RcT9RQ6SEeWoH8cK047h5w" isReadOnly="true" association="_Re6lMQ6SEeWoH8cK047h5w">
                  <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5eA6SEeWoH8cK047h5w" value="new Server()"/>
                </ownedAttribute>
              </nestedClassifier>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_RcduIQ6SEeWoH8cK047h5w" name="ServerRMI">
              <ownedComment xmi:id="_Rew0Zw6SEeWoH8cK047h5w">
                <body>RMI Server Listener
@author Alain Carlucci (alain.carlucci@mail.polimi.it)
@since  May 16, 2015</body>
              </ownedComment>
              <ownedAttribute xmi:id="_Red5ig6SEeWoH8cK047h5w" name="LOG" visibility="private" isLeaf="true" isStatic="true" type="_Rd4DbA6SEeWoH8cK047h5w" isReadOnly="true" association="_Re6lQA6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5iw6SEeWoH8cK047h5w" value="Logger.getLogger(ServerRMI.class.getName())"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5jA6SEeWoH8cK047h5w" name="RMISERVER_STRING" visibility="private" isLeaf="true" isStatic="true" isReadOnly="true">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5jQ6SEeWoH8cK047h5w" value="&quot;eftaiosRMI&quot;"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5jg6SEeWoH8cK047h5w" name="mMap" visibility="private" type="_ReBNgg6SEeWoH8cK047h5w" association="_Re6lQw6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_Red5kQ6SEeWoH8cK047h5w" name="mRandom" visibility="private" type="_ReK-UQ6SEeWoH8cK047h5w" association="_Re6lRg6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_Red5kg6SEeWoH8cK047h5w" value="new Random()"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_Red5lA6SEeWoH8cK047h5w" name="mRegistry" visibility="private" type="_ReBNfg6SEeWoH8cK047h5w" association="_Re6lSQ6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_RenqQQ6SEeWoH8cK047h5w" name="mIsUp" visibility="private">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_RenqQg6SEeWoH8cK047h5w" value="false"/>
              </ownedAttribute>
              <interfaceRealization xmi:id="_ReK-Uw6SEeWoH8cK047h5w" client="_RcduIQ6SEeWoH8cK047h5w" supplier="_RcKzVw6SEeWoH8cK047h5w" contract="_RcKzVw6SEeWoH8cK047h5w"/>
              <interfaceRealization xmi:id="_ReUIXw6SEeWoH8cK047h5w" client="_RcduIQ6SEeWoH8cK047h5w" supplier="_ReBNdg6SEeWoH8cK047h5w" contract="_ReBNdg6SEeWoH8cK047h5w"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqyA6SEeWoH8cK047h5w" name="ServerRMI" specification="_RcduIg6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqyQ6SEeWoH8cK047h5w" type="_RcduIQ6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>mMap = new HashMap&lt;String, ClientConnRMI>();
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqyg6SEeWoH8cK047h5w" name="run" specification="_RcduJg6SEeWoH8cK047h5w">
                <language>java</language>
                <body>try {
         try {
             mRegistry = LocateRegistry.getRegistry();
             mRegistry.list(); // This will throw an exception if the mRegistry does not exists
         } catch(Exception e) {
             LOG.log(Level.FINEST, e.toString(), e);
             mRegistry = LocateRegistry.createRegistry(1099);
         }
         
         ServerRMIMask stub = (ServerRMIMask) UnicastRemoteObject.exportObject(this, 0);
         mRegistry.bind(RMISERVER_STRING, stub);

         LOG.log(Level.INFO, &quot;RMI server is running&quot;);
         mIsUp = true;
     } catch (Exception e) {
         LOG.log(Level.SEVERE, &quot;RMI server is down: &quot; + e.toString(), e);
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renqyw6SEeWoH8cK047h5w" name="registerAndGetId" specification="_RcduKg6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RenqzA6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <language>java</language>
                <body>StringBuilder id = new StringBuilder();
     for(int i=0;i&lt;32;i++)
         id.append((char)('0' + mRandom.nextInt(10)));
     
     String ids = id.toString();
     ClientConnRMI conn = new ClientConnRMI(this, ids);
     if(Server.getInstance().addClient(conn))
         mMap.put(ids, conn);
     else
         conn.disconnect();
     return ids;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_RenqzQ6SEeWoH8cK047h5w" name="onRMICommand" specification="_ReUIYA6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renqzg6SEeWoH8cK047h5w" name="clientId">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <ownedParameter xmi:id="_Renqzw6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
                <language>java</language>
                <body>if(clientId == null || pkt == null)
         return;
     
     if(mMap.containsKey(clientId)) {
         ClientConnRMI conn = mMap.get(clientId);
         conn.onRMICommand(pkt);
     } else {
         LOG.log(Level.INFO, &quot;Received an unknown message&quot;);
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq0A6SEeWoH8cK047h5w" name="readCommands" specification="_RcduLw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renq0Q6SEeWoH8cK047h5w" name="clientId">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <ownedParameter xmi:id="_Renq0g6SEeWoH8cK047h5w" type="_Rd4DYA6SEeWoH8cK047h5w" direction="return">
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_Renq0w6SEeWoH8cK047h5w" value="*"/>
                </ownedParameter>
                <language>java</language>
                <body>if(clientId == null)
         return new GameCommand[0];
     
     if(mMap.containsKey(clientId)) {
         ClientConnRMI conn = mMap.get(clientId);
         return conn.readCommands();
     } else {
         LOG.log(Level.INFO, &quot;Received an unknown message&quot;);
         return new GameCommand[0];
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq1A6SEeWoH8cK047h5w" name="unregister" specification="_RcduNw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renq1Q6SEeWoH8cK047h5w" name="clientId">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <language>java</language>
                <body>mMap.remove(clientId);
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq1g6SEeWoH8cK047h5w" name="tearDown" specification="_RcduOQ6SEeWoH8cK047h5w">
                <language>java</language>
                <body>try {
         if(mRegistry != null) {
             UnicastRemoteObject.unexportObject(this, true);
             mRegistry.unbind(RMISERVER_STRING);
             mRegistry = null;
         }
         mIsUp = false;
     } catch (AccessException e) {
         LOG.log(Level.FINEST, e.toString(), e);
     } catch (RemoteException e) {
         LOG.log(Level.FINEST, e.toString(), e);
     } catch (NotBoundException e) {
         LOG.log(Level.FINEST, e.toString(), e);
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq1w6SEeWoH8cK047h5w" name="isDown" specification="_RcduPw6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renq2A6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if(mRegistry != null)
         return false;
     return true;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq2Q6SEeWoH8cK047h5w" name="isUp" specification="_RcduRg6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renq2g6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>return mIsUp;
 </body>
              </ownedBehavior>
              <ownedOperation xmi:id="_RcduIg6SEeWoH8cK047h5w" name="ServerRMI" method="_RenqyA6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcduIw6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcduJA6SEeWoH8cK047h5w" key="create"/>
                </eAnnotations>
                <ownedParameter xmi:id="_RcduJQ6SEeWoH8cK047h5w" type="_RcduIQ6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_RcduJg6SEeWoH8cK047h5w" name="run" method="_Renqyg6SEeWoH8cK047h5w"/>
              <ownedOperation xmi:id="_RcduKg6SEeWoH8cK047h5w" name="registerAndGetId" method="_Renqyw6SEeWoH8cK047h5w" raisedException="_Rd4DeQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RcduKw6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcduLw6SEeWoH8cK047h5w" name="readCommands" method="_Renq0A6SEeWoH8cK047h5w" raisedException="_Rd4DeQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RcduMA6SEeWoH8cK047h5w" name="clientId">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <ownedParameter xmi:id="_RcduMQ6SEeWoH8cK047h5w" type="_Rd4DYA6SEeWoH8cK047h5w" direction="return">
                  <upperValue xmi:type="uml:LiteralUnlimitedNatural" xmi:id="_RcduMg6SEeWoH8cK047h5w" value="*"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcduNw6SEeWoH8cK047h5w" name="unregister" method="_Renq1A6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0aA6SEeWoH8cK047h5w">
                  <body>Unregister a clientId
     * 
     * @param clientId  Your unique ID obtained by calling registerAndGetId()</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcduOA6SEeWoH8cK047h5w" name="clientId">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcduOQ6SEeWoH8cK047h5w" name="tearDown" method="_Renq1g6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcduOg6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcduOw6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
              </ownedOperation>
              <ownedOperation xmi:id="_RcduPw6SEeWoH8cK047h5w" name="isDown" method="_Renq1w6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcduQA6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcduQQ6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedParameter xmi:id="_RcduQg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcduRg6SEeWoH8cK047h5w" name="isUp" method="_Renq2Q6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RcduRw6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_ReUIYA6SEeWoH8cK047h5w" name="onRMICommand" method="_RenqzQ6SEeWoH8cK047h5w" raisedException="_Rd4DeQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_ReUIYQ6SEeWoH8cK047h5w" name="clientId">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/UMLPrimitiveTypes.library.uml#String"/>
                </ownedParameter>
                <ownedParameter xmi:id="_ReUIYg6SEeWoH8cK047h5w" name="pkt" type="_Rd4DYA6SEeWoH8cK047h5w"/>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Class" xmi:id="_RcnfIA6SEeWoH8cK047h5w" name="ServerTCP" visibility="package">
              <ownedComment xmi:id="_Rew0aQ6SEeWoH8cK047h5w">
                <body>TCP Server Listener
@author Alain Carlucci (alain.carlucci@mail.polimi.it)
@since  May 8, 2015</body>
              </ownedComment>
              <ownedAttribute xmi:id="_RenqRA6SEeWoH8cK047h5w" name="LOG" visibility="private" isLeaf="true" isStatic="true" type="_Rd4DbA6SEeWoH8cK047h5w" isReadOnly="true" association="_Re6lTA6SEeWoH8cK047h5w">
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_RenqRQ6SEeWoH8cK047h5w" value="Logger.getLogger(ServerTCP.class.getName())"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_RenqRg6SEeWoH8cK047h5w" name="mCachedPool" visibility="private" type="_ReK-Vg6SEeWoH8cK047h5w" association="_Re6lTw6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_RenqSA6SEeWoH8cK047h5w" name="mServer" visibility="private" type="_ReK-VA6SEeWoH8cK047h5w" association="_Re6lUg6SEeWoH8cK047h5w"/>
              <ownedAttribute xmi:id="_RenqSg6SEeWoH8cK047h5w" name="mStopEvent" visibility="private">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                <defaultValue xmi:type="uml:LiteralString" xmi:id="_RenqSw6SEeWoH8cK047h5w" value="false"/>
              </ownedAttribute>
              <ownedAttribute xmi:id="_RenqTQ6SEeWoH8cK047h5w" name="mPort" visibility="private" isLeaf="true" isReadOnly="true">
                <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
              </ownedAttribute>
              <interfaceRealization xmi:id="_ReK-Wg6SEeWoH8cK047h5w" client="_RcnfIA6SEeWoH8cK047h5w" supplier="_RcKzVw6SEeWoH8cK047h5w" contract="_RcKzVw6SEeWoH8cK047h5w"/>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq2w6SEeWoH8cK047h5w" name="ServerTCP" specification="_RcnfIQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renq3A6SEeWoH8cK047h5w" name="port">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
                <ownedParameter xmi:id="_Renq3Q6SEeWoH8cK047h5w" type="_RcnfIA6SEeWoH8cK047h5w" direction="return"/>
                <language>java</language>
                <body>mPort = port;
     mCachedPool = Executors.newCachedThreadPool();
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq3g6SEeWoH8cK047h5w" name="acceptConnection" specification="_RcnfJg6SEeWoH8cK047h5w">
                <language>java</language>
                <body>try {
         Socket s = mServer.accept();
         if(s != null &amp;&amp; !mStopEvent) {
             ClientConn c = new ClientConnTCP(s);

             if(Server.getInstance().addClient(c))
                 mCachedPool.submit(c);
             else 
                 c.disconnect();
         }
     } catch(Exception e){
         LOG.log(Level.FINEST, &quot;TCP Connection closed: &quot; + e.toString(), e);
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq3w6SEeWoH8cK047h5w" name="run" specification="_RcnfJw6SEeWoH8cK047h5w">
                <language>java</language>
                <body>try {
         mServer = new ServerSocket(mPort);
         LOG.log(Level.INFO, &quot;TCP Server is running&quot;);
         while (!mStopEvent) {
             acceptConnection();
         }
         mServer.close();
     } catch(IOException e){
         LOG.log(Level.SEVERE, &quot;TCP Server is down: &quot; + e.toString(), e);
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq4A6SEeWoH8cK047h5w" name="tearDown" specification="_RcnfKA6SEeWoH8cK047h5w">
                <language>java</language>
                <body>mStopEvent = true;
     try {
         if(mServer != null)
             mServer.close();
     } catch (IOException e) {
         LOG.log(Level.FINEST, e.toString(), e);
     }
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq4Q6SEeWoH8cK047h5w" name="isDown" specification="_RcnfLg6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renq4g6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if(mServer == null)
         return true;
     if(mServer.isClosed())
         return true;
     return false;
 </body>
              </ownedBehavior>
              <ownedBehavior xmi:type="uml:OpaqueBehavior" xmi:id="_Renq4w6SEeWoH8cK047h5w" name="isUp" specification="_RcnfNQ6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_Renq5A6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
                <language>java</language>
                <body>if(mServer == null)
         return false;
     if(mServer.isBound() &amp;&amp; !mServer.isClosed())
         return true;
     return false;
 </body>
              </ownedBehavior>
              <ownedOperation xmi:id="_RcnfIQ6SEeWoH8cK047h5w" name="ServerTCP" method="_Renq2w6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcnfIw6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcnfJA6SEeWoH8cK047h5w" key="create"/>
                </eAnnotations>
                <ownedComment xmi:id="_Rew0ag6SEeWoH8cK047h5w">
                  <body>The constructor
     * 
     * @param port Listening port</body>
                </ownedComment>
                <ownedParameter xmi:id="_RcnfIg6SEeWoH8cK047h5w" name="port">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#int"/>
                </ownedParameter>
                <ownedParameter xmi:id="_RcnfJQ6SEeWoH8cK047h5w" type="_RcnfIA6SEeWoH8cK047h5w" direction="return"/>
              </ownedOperation>
              <ownedOperation xmi:id="_RcnfJg6SEeWoH8cK047h5w" name="acceptConnection" visibility="private" method="_Renq3g6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0aw6SEeWoH8cK047h5w">
                  <body>Server loop</body>
                </ownedComment>
              </ownedOperation>
              <ownedOperation xmi:id="_RcnfJw6SEeWoH8cK047h5w" name="run" method="_Renq3w6SEeWoH8cK047h5w">
                <ownedComment xmi:id="_Rew0bA6SEeWoH8cK047h5w">
                  <body>Run the listener</body>
                </ownedComment>
              </ownedOperation>
              <ownedOperation xmi:id="_RcnfKA6SEeWoH8cK047h5w" name="tearDown" method="_Renq4A6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcnfKQ6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcnfKg6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
              </ownedOperation>
              <ownedOperation xmi:id="_RcnfLg6SEeWoH8cK047h5w" name="isDown" method="_Renq4Q6SEeWoH8cK047h5w">
                <eAnnotations xmi:id="_RcnfLw6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
                  <details xmi:id="_RcnfMA6SEeWoH8cK047h5w" key="synchronized"/>
                </eAnnotations>
                <ownedParameter xmi:id="_RcnfMQ6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
              <ownedOperation xmi:id="_RcnfNQ6SEeWoH8cK047h5w" name="isUp" method="_Renq4w6SEeWoH8cK047h5w">
                <ownedParameter xmi:id="_RcnfNg6SEeWoH8cK047h5w" direction="return">
                  <type xmi:type="uml:PrimitiveType" href="pathmap://UML_LIBRARIES/JavaPrimitiveTypes.library.uml#boolean"/>
                </ownedParameter>
              </ownedOperation>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0bQ6SEeWoH8cK047h5w" name="" memberEnd="_Rew0bg6SEeWoH8cK047h5w _ReUIZg6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0bg6SEeWoH8cK047h5w" name="" type="_Rb3RMA6SEeWoH8cK047h5w" association="_Rew0bQ6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0cA6SEeWoH8cK047h5w" name="" memberEnd="_Rew0cQ6SEeWoH8cK047h5w _ReUIaA6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0cQ6SEeWoH8cK047h5w" name="" type="_Rb3RMA6SEeWoH8cK047h5w" association="_Rew0cA6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0cw6SEeWoH8cK047h5w" name="" memberEnd="_Rew0dA6SEeWoH8cK047h5w _ReUIag6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0dA6SEeWoH8cK047h5w" name="" type="_Rb3RMA6SEeWoH8cK047h5w" association="_Rew0cw6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0dg6SEeWoH8cK047h5w" name="" memberEnd="_Rew0dw6SEeWoH8cK047h5w _Red5Qw6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0dw6SEeWoH8cK047h5w" name="" type="_RcBCRg6SEeWoH8cK047h5w" association="_Rew0dg6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0eQ6SEeWoH8cK047h5w" name="" memberEnd="_Rew0eg6SEeWoH8cK047h5w _Red5Sw6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0eg6SEeWoH8cK047h5w" name="" type="_RcBCVQ6SEeWoH8cK047h5w" association="_Rew0eQ6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0fA6SEeWoH8cK047h5w" name="" memberEnd="_Rew0fQ6SEeWoH8cK047h5w _Red5UA6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0fQ6SEeWoH8cK047h5w" name="" type="_RcBCVQ6SEeWoH8cK047h5w" association="_Rew0fA6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0fw6SEeWoH8cK047h5w" name="" memberEnd="_Rew0gA6SEeWoH8cK047h5w _Red5VQ6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0gA6SEeWoH8cK047h5w" name="" type="_RcKzPA6SEeWoH8cK047h5w" association="_Rew0fw6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0gg6SEeWoH8cK047h5w" name="" memberEnd="_Rew0gw6SEeWoH8cK047h5w _Red5Vw6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0gw6SEeWoH8cK047h5w" name="" type="_RcKzPA6SEeWoH8cK047h5w" association="_Rew0gg6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0hQ6SEeWoH8cK047h5w" name="" memberEnd="_Rew0hg6SEeWoH8cK047h5w _Red5WQ6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0hg6SEeWoH8cK047h5w" name="" type="_RcKzPA6SEeWoH8cK047h5w" association="_Rew0hQ6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0iA6SEeWoH8cK047h5w" name="" memberEnd="_Rew0iQ6SEeWoH8cK047h5w _Red5Ww6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0iQ6SEeWoH8cK047h5w" name="" type="_RcKzPA6SEeWoH8cK047h5w" association="_Rew0iA6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0iw6SEeWoH8cK047h5w" name="" memberEnd="_Rew0jA6SEeWoH8cK047h5w _Red5XQ6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0jA6SEeWoH8cK047h5w" name="" type="_RcKzWw6SEeWoH8cK047h5w" association="_Rew0iw6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0jg6SEeWoH8cK047h5w" name="" memberEnd="_Rew0jw6SEeWoH8cK047h5w _Red5ZA6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0jw6SEeWoH8cK047h5w" name="" type="_RcKzWw6SEeWoH8cK047h5w" association="_Rew0jg6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0kQ6SEeWoH8cK047h5w" name="" memberEnd="_Rew0kg6SEeWoH8cK047h5w _Red5aw6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0kg6SEeWoH8cK047h5w" name="" type="_RcKzWw6SEeWoH8cK047h5w" association="_Rew0kQ6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0lA6SEeWoH8cK047h5w" name="" memberEnd="_Rew0lQ6SEeWoH8cK047h5w _Red5cQ6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0lQ6SEeWoH8cK047h5w" name="" type="_RcKzWw6SEeWoH8cK047h5w" association="_Rew0lA6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Rew0lw6SEeWoH8cK047h5w" name="" memberEnd="_Rew0mA6SEeWoH8cK047h5w _Red5dQ6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Rew0mA6SEeWoH8cK047h5w" name="" type="_RcT9RQ6SEeWoH8cK047h5w" association="_Rew0lw6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lMQ6SEeWoH8cK047h5w" name="" memberEnd="_Re6lMg6SEeWoH8cK047h5w _Red5dw6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lMg6SEeWoH8cK047h5w" name="" type="_RcT9Rg6SEeWoH8cK047h5w" association="_Re6lMQ6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lNA6SEeWoH8cK047h5w" name="" memberEnd="_Re6lNQ6SEeWoH8cK047h5w _Red5eQ6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lNQ6SEeWoH8cK047h5w" name="" type="_RcT9RQ6SEeWoH8cK047h5w" association="_Re6lNA6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lNw6SEeWoH8cK047h5w" name="" memberEnd="_Re6lOA6SEeWoH8cK047h5w _Red5fA6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lOA6SEeWoH8cK047h5w" name="" type="_RcT9RQ6SEeWoH8cK047h5w" association="_Re6lNw6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lOg6SEeWoH8cK047h5w" name="" memberEnd="_Re6lOw6SEeWoH8cK047h5w _Red5hA6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lOw6SEeWoH8cK047h5w" name="" type="_RcT9RQ6SEeWoH8cK047h5w" association="_Re6lOg6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lPQ6SEeWoH8cK047h5w" name="" memberEnd="_Re6lPg6SEeWoH8cK047h5w _Red5hw6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lPg6SEeWoH8cK047h5w" name="" type="_RcT9RQ6SEeWoH8cK047h5w" association="_Re6lPQ6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lQA6SEeWoH8cK047h5w" name="" memberEnd="_Re6lQQ6SEeWoH8cK047h5w _Red5ig6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lQQ6SEeWoH8cK047h5w" name="" type="_RcduIQ6SEeWoH8cK047h5w" association="_Re6lQA6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lQw6SEeWoH8cK047h5w" name="" memberEnd="_Re6lRA6SEeWoH8cK047h5w _Red5jg6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lRA6SEeWoH8cK047h5w" name="" type="_RcduIQ6SEeWoH8cK047h5w" association="_Re6lQw6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lRg6SEeWoH8cK047h5w" name="" memberEnd="_Re6lRw6SEeWoH8cK047h5w _Red5kQ6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lRw6SEeWoH8cK047h5w" name="" type="_RcduIQ6SEeWoH8cK047h5w" association="_Re6lRg6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lSQ6SEeWoH8cK047h5w" name="" memberEnd="_Re6lSg6SEeWoH8cK047h5w _Red5lA6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lSg6SEeWoH8cK047h5w" name="" type="_RcduIQ6SEeWoH8cK047h5w" association="_Re6lSQ6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lTA6SEeWoH8cK047h5w" name="" memberEnd="_Re6lTQ6SEeWoH8cK047h5w _RenqRA6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lTQ6SEeWoH8cK047h5w" name="" type="_RcnfIA6SEeWoH8cK047h5w" association="_Re6lTA6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lTw6SEeWoH8cK047h5w" name="" memberEnd="_Re6lUA6SEeWoH8cK047h5w _RenqRg6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lUA6SEeWoH8cK047h5w" name="" type="_RcnfIA6SEeWoH8cK047h5w" association="_Re6lTw6SEeWoH8cK047h5w"/>
            </packagedElement>
            <packagedElement xmi:type="uml:Association" xmi:id="_Re6lUg6SEeWoH8cK047h5w" name="" memberEnd="_Re6lUw6SEeWoH8cK047h5w _RenqSA6SEeWoH8cK047h5w">
              <ownedEnd xmi:id="_Re6lUw6SEeWoH8cK047h5w" name="" type="_RcnfIA6SEeWoH8cK047h5w" association="_Re6lUg6SEeWoH8cK047h5w"/>
            </packagedElement>
          </packagedElement>
        </packagedElement>
      </packagedElement>
    </packagedElement>
    <packagedElement xmi:type="uml:Package" xmi:id="_RbRbVQ6SEeWoH8cK047h5w" name="java">
      <packagedElement xmi:type="uml:Package" xmi:id="_RbRbVg6SEeWoH8cK047h5w" name="io">
        <packagedElement xmi:type="uml:Interface" xmi:id="_Rd4DaA6SEeWoH8cK047h5w" name="Serializable"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_Rd4Dhg6SEeWoH8cK047h5w" name="IOException"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_Rd4DiA6SEeWoH8cK047h5w" name="ObjectInputStream"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_Rd4Dig6SEeWoH8cK047h5w" name="ObjectOutputStream"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_RbRbVw6SEeWoH8cK047h5w" name="util">
        <packagedElement xmi:type="uml:Package" xmi:id="_RbRbWA6SEeWoH8cK047h5w" name="logging">
          <packagedElement xmi:type="uml:Class" xmi:id="_Rd4Dag6SEeWoH8cK047h5w" name="Level"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_Rd4DbA6SEeWoH8cK047h5w" name="Logger"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Package" xmi:id="_RbuHQg6SEeWoH8cK047h5w" name="concurrent">
          <packagedElement xmi:type="uml:Interface" xmi:id="_ReK-Vg6SEeWoH8cK047h5w" name="ExecutorService"/>
          <packagedElement xmi:type="uml:Class" xmi:id="_ReK-WA6SEeWoH8cK047h5w" name="Executors"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_Rd4Dew6SEeWoH8cK047h5w" name="LinkedList"/>
        <packagedElement xmi:type="uml:Interface" xmi:id="_Rd4DfQ6SEeWoH8cK047h5w" name="Queue"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_ReBNWA6SEeWoH8cK047h5w" name="ArrayList"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_ReBNWg6SEeWoH8cK047h5w" name="Collections"/>
        <packagedElement xmi:type="uml:Interface" xmi:id="_ReBNXA6SEeWoH8cK047h5w" name="List"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_ReBNgg6SEeWoH8cK047h5w" name="HashMap"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_ReK-UQ6SEeWoH8cK047h5w" name="Random"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_RbbMUA6SEeWoH8cK047h5w" name="rmi">
        <packagedElement xmi:type="uml:Package" xmi:id="_RbuHQA6SEeWoH8cK047h5w" name="registry">
          <packagedElement xmi:type="uml:Class" xmi:id="_ReBNfA6SEeWoH8cK047h5w" name="LocateRegistry"/>
          <packagedElement xmi:type="uml:Interface" xmi:id="_ReBNfg6SEeWoH8cK047h5w" name="Registry"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Package" xmi:id="_RbuHQQ6SEeWoH8cK047h5w" name="server">
          <packagedElement xmi:type="uml:Class" xmi:id="_ReBNgA6SEeWoH8cK047h5w" name="UnicastRemoteObject"/>
        </packagedElement>
        <packagedElement xmi:type="uml:Class" xmi:id="_Rd4DeQ6SEeWoH8cK047h5w" name="RemoteException"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_ReBNeA6SEeWoH8cK047h5w" name="AccessException"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_ReBNeg6SEeWoH8cK047h5w" name="NotBoundException"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_RbbMUQ6SEeWoH8cK047h5w" name="net">
        <packagedElement xmi:type="uml:Class" xmi:id="_Rd4DjA6SEeWoH8cK047h5w" name="Socket"/>
        <packagedElement xmi:type="uml:Class" xmi:id="_ReK-VA6SEeWoH8cK047h5w" name="ServerSocket"/>
      </packagedElement>
      <packagedElement xmi:type="uml:Package" xmi:id="_ReK-Yw6SEeWoH8cK047h5w" name="lang">
        <packagedElement xmi:type="uml:Interface" xmi:id="_ReK-ZA6SEeWoH8cK047h5w" name="Runnable"/>
      </packagedElement>
    </packagedElement>
    <profileApplication xmi:id="_RQiyAw6SEeWoH8cK047h5w">
      <eAnnotations xmi:id="_RQiyBA6SEeWoH8cK047h5w" source="http://www.eclipse.org/uml2/2.0.0/UML">
        <references xmi:type="ecore:EPackage" href="pathmap://UMLLAB_PROFILES/UMLLab.profile.uml#UMLLabProfile-Annotation_2-UMLLabProfile"/>
      </eAnnotations>
      <appliedProfile href="pathmap://UMLLAB_PROFILES/UMLLab.profile.uml#UMLLabProfile"/>
    </profileApplication>
  </uml:Model>
  <UMLLabProfile:TargetLanguage xmi:id="_RQiyBQ6SEeWoH8cK047h5w" base_Package="_RLn1wA6SEeWoH8cK047h5w">
    <languageName>java</languageName>
  </UMLLabProfile:TargetLanguage>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcKzMQ6SEeWoH8cK047h5w" base_Element="_RcKzMA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcKzMg6SEeWoH8cK047h5w" base_Element="_RcKzMA6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcKzMw6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcKzNQ6SEeWoH8cK047h5w" base_Element="_RcKzNA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcKzNg6SEeWoH8cK047h5w" base_Element="_RcKzNA6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcKzNw6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:Array xmi:id="_RcKzOw6SEeWoH8cK047h5w" base_Element="_RcKzOA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcKzPg6SEeWoH8cK047h5w" base_Element="_RcKzPQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcKzPw6SEeWoH8cK047h5w" base_Element="_RcKzPQ6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcKzQA6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcKzRA6SEeWoH8cK047h5w" base_Element="_RcKzQQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcKzRQ6SEeWoH8cK047h5w" base_Element="_RcKzQQ6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcKzRg6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcKzSw6SEeWoH8cK047h5w" base_Element="_RcKzRw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcKzTA6SEeWoH8cK047h5w" base_Element="_RcKzRw6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcKzTQ6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcKzUg6SEeWoH8cK047h5w" base_Element="_RcKzTw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcduJw6SEeWoH8cK047h5w" base_Element="_RcduJg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcduKA6SEeWoH8cK047h5w" base_Element="_RcduJg6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcduKQ6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcduLA6SEeWoH8cK047h5w" base_Element="_RcduKg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcduLQ6SEeWoH8cK047h5w" base_Element="_RcduKg6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcduLg6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:Array xmi:id="_RcduMw6SEeWoH8cK047h5w" base_Element="_RcduLw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcduNA6SEeWoH8cK047h5w" base_Element="_RcduLw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcduNQ6SEeWoH8cK047h5w" base_Element="_RcduLw6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcduNg6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcduPA6SEeWoH8cK047h5w" base_Element="_RcduOQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcduPQ6SEeWoH8cK047h5w" base_Element="_RcduOQ6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcduPg6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcduQw6SEeWoH8cK047h5w" base_Element="_RcduPw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcduRA6SEeWoH8cK047h5w" base_Element="_RcduPw6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcduRQ6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcduSA6SEeWoH8cK047h5w" base_Element="_RcduRg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcduSQ6SEeWoH8cK047h5w" base_Element="_RcduRg6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcduSg6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcnfKw6SEeWoH8cK047h5w" base_Element="_RcnfKA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcnfLA6SEeWoH8cK047h5w" base_Element="_RcnfKA6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcnfLQ6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcnfMg6SEeWoH8cK047h5w" base_Element="_RcnfLg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcnfMw6SEeWoH8cK047h5w" base_Element="_RcnfLg6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcnfNA6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RcnfNw6SEeWoH8cK047h5w" base_Element="_RcnfNQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_RcnfOA6SEeWoH8cK047h5w" base_Element="_RcnfNQ6SEeWoH8cK047h5w">
    <annotations xmi:id="_RcnfOQ6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:Reference xmi:id="_Rd4DYQ6SEeWoH8cK047h5w" base_Element="_Rd4DYA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4DYw6SEeWoH8cK047h5w" base_Element="_Rd4DYg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4DZQ6SEeWoH8cK047h5w" base_Element="_Rd4DZA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4DZw6SEeWoH8cK047h5w" base_Element="_Rd4DZg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4DaQ6SEeWoH8cK047h5w" base_Element="_Rd4DaA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4Daw6SEeWoH8cK047h5w" base_Element="_Rd4Dag6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4DbQ6SEeWoH8cK047h5w" base_Element="_Rd4DbA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4Ddg6SEeWoH8cK047h5w" base_Element="_Rd4DdQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4Deg6SEeWoH8cK047h5w" base_Element="_Rd4DeQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4DfA6SEeWoH8cK047h5w" base_Element="_Rd4Dew6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4Dfg6SEeWoH8cK047h5w" base_Element="_Rd4DfQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4Dhw6SEeWoH8cK047h5w" base_Element="_Rd4Dhg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4DiQ6SEeWoH8cK047h5w" base_Element="_Rd4DiA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4Diw6SEeWoH8cK047h5w" base_Element="_Rd4Dig6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rd4DjQ6SEeWoH8cK047h5w" base_Element="_Rd4DjA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNUQ6SEeWoH8cK047h5w" base_Element="_ReBNUA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNUw6SEeWoH8cK047h5w" base_Element="_ReBNUg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNVQ6SEeWoH8cK047h5w" base_Element="_ReBNVA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNVw6SEeWoH8cK047h5w" base_Element="_ReBNVg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNWQ6SEeWoH8cK047h5w" base_Element="_ReBNWA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNWw6SEeWoH8cK047h5w" base_Element="_ReBNWg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNXQ6SEeWoH8cK047h5w" base_Element="_ReBNXA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNdw6SEeWoH8cK047h5w" base_Element="_ReBNdg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNeQ6SEeWoH8cK047h5w" base_Element="_ReBNeA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNew6SEeWoH8cK047h5w" base_Element="_ReBNeg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNfQ6SEeWoH8cK047h5w" base_Element="_ReBNfA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNfw6SEeWoH8cK047h5w" base_Element="_ReBNfg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReBNgQ6SEeWoH8cK047h5w" base_Element="_ReBNgA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReK-UA6SEeWoH8cK047h5w" base_Element="_ReBNgg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReK-Ug6SEeWoH8cK047h5w" base_Element="_ReK-UQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReK-VQ6SEeWoH8cK047h5w" base_Element="_ReK-VA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReK-Vw6SEeWoH8cK047h5w" base_Element="_ReK-Vg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReK-WQ6SEeWoH8cK047h5w" base_Element="_ReK-WA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_ReK-ZQ6SEeWoH8cK047h5w" base_Element="_ReK-ZA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_ReUIQA6SEeWoH8cK047h5w" base_Element="_ReK-aw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_ReUIQQ6SEeWoH8cK047h5w" base_Element="_ReK-aw6SEeWoH8cK047h5w">
    <annotations xmi:id="_ReUIQg6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_ReUITg6SEeWoH8cK047h5w" base_Element="_ReUISg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_ReUITw6SEeWoH8cK047h5w" base_Element="_ReUISg6SEeWoH8cK047h5w">
    <annotations xmi:id="_ReUIUA6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_ReUIYw6SEeWoH8cK047h5w" base_Element="_ReUIYA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Annotations xmi:id="_ReUIZA6SEeWoH8cK047h5w" base_Element="_ReUIYA6SEeWoH8cK047h5w">
    <annotations xmi:id="_ReUIZQ6SEeWoH8cK047h5w" name="Override"/>
  </UMLLabProfile:Annotations>
  <UMLLabProfile:LegacyStyledElement xmi:id="_ReUIaQ6SEeWoH8cK047h5w" base_Element="_ReUIaA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_ReUIaw6SEeWoH8cK047h5w" base_Element="_ReUIag6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5Qg6SEeWoH8cK047h5w" base_Element="_Red5QA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5RQ6SEeWoH8cK047h5w" base_Element="_Red5Qw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5Rw6SEeWoH8cK047h5w" base_Element="_Red5Rg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5Sg6SEeWoH8cK047h5w" base_Element="_Red5SA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Generics xmi:id="_Red5TA6SEeWoH8cK047h5w" genericsValue="GameCommand" base_Element="_Red5Sw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5TQ6SEeWoH8cK047h5w" base_Element="_Red5Sw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5Tw6SEeWoH8cK047h5w" base_Element="_Red5Tg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5UQ6SEeWoH8cK047h5w" base_Element="_Red5UA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5VA6SEeWoH8cK047h5w" base_Element="_Red5Ug6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5WA6SEeWoH8cK047h5w" base_Element="_Red5Vw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5Wg6SEeWoH8cK047h5w" base_Element="_Red5WQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5XA6SEeWoH8cK047h5w" base_Element="_Red5Ww6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5YQ6SEeWoH8cK047h5w" base_Element="_Red5Xw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5Yw6SEeWoH8cK047h5w" base_Element="_Red5Yg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5Zw6SEeWoH8cK047h5w" base_Element="_Red5ZA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5ag6SEeWoH8cK047h5w" base_Element="_Red5aA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5bQ6SEeWoH8cK047h5w" base_Element="_Red5aw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5cA6SEeWoH8cK047h5w" base_Element="_Red5bg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Generics xmi:id="_Red5cg6SEeWoH8cK047h5w" genericsValue="Client" base_Element="_Red5cQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5dA6SEeWoH8cK047h5w" base_Element="_Red5cQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5ew6SEeWoH8cK047h5w" base_Element="_Red5eQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5fg6SEeWoH8cK047h5w" base_Element="_Red5fA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5gA6SEeWoH8cK047h5w" base_Element="_Red5fw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5gw6SEeWoH8cK047h5w" base_Element="_Red5gQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5hg6SEeWoH8cK047h5w" base_Element="_Red5hA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Generics xmi:id="_Red5iA6SEeWoH8cK047h5w" genericsValue="GameManager" base_Element="_Red5hw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5iQ6SEeWoH8cK047h5w" base_Element="_Red5hw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Generics xmi:id="_Red5jw6SEeWoH8cK047h5w" genericsValue="String, ClientConnRMI" base_Element="_Red5jg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5kA6SEeWoH8cK047h5w" base_Element="_Red5jg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_Red5kw6SEeWoH8cK047h5w" base_Element="_Red5kQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RenqQA6SEeWoH8cK047h5w" base_Element="_Red5lA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RenqQw6SEeWoH8cK047h5w" base_Element="_RenqQQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RenqRw6SEeWoH8cK047h5w" base_Element="_RenqRg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RenqSQ6SEeWoH8cK047h5w" base_Element="_RenqSA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RenqTA6SEeWoH8cK047h5w" base_Element="_RenqSg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:LegacyStyledElement xmi:id="_RenqTg6SEeWoH8cK047h5w" base_Element="_RenqTQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0bw6SEeWoH8cK047h5w" base_Element="_Rew0bQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0cg6SEeWoH8cK047h5w" base_Element="_Rew0cA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0dQ6SEeWoH8cK047h5w" base_Element="_Rew0cw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0eA6SEeWoH8cK047h5w" base_Element="_Rew0dg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0ew6SEeWoH8cK047h5w" base_Element="_Rew0eQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0fg6SEeWoH8cK047h5w" base_Element="_Rew0fA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0gQ6SEeWoH8cK047h5w" base_Element="_Rew0fw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0hA6SEeWoH8cK047h5w" base_Element="_Rew0gg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0hw6SEeWoH8cK047h5w" base_Element="_Rew0hQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0ig6SEeWoH8cK047h5w" base_Element="_Rew0iA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0jQ6SEeWoH8cK047h5w" base_Element="_Rew0iw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0kA6SEeWoH8cK047h5w" base_Element="_Rew0jg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0kw6SEeWoH8cK047h5w" base_Element="_Rew0kQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Rew0lg6SEeWoH8cK047h5w" base_Element="_Rew0lA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lMA6SEeWoH8cK047h5w" base_Element="_Rew0lw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lMw6SEeWoH8cK047h5w" base_Element="_Re6lMQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lNg6SEeWoH8cK047h5w" base_Element="_Re6lNA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lOQ6SEeWoH8cK047h5w" base_Element="_Re6lNw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lPA6SEeWoH8cK047h5w" base_Element="_Re6lOg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lPw6SEeWoH8cK047h5w" base_Element="_Re6lPQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lQg6SEeWoH8cK047h5w" base_Element="_Re6lQA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lRQ6SEeWoH8cK047h5w" base_Element="_Re6lQw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lSA6SEeWoH8cK047h5w" base_Element="_Re6lRg6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lSw6SEeWoH8cK047h5w" base_Element="_Re6lSQ6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lTg6SEeWoH8cK047h5w" base_Element="_Re6lTA6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lUQ6SEeWoH8cK047h5w" base_Element="_Re6lTw6SEeWoH8cK047h5w"/>
  <UMLLabProfile:Reference xmi:id="_Re6lVA6SEeWoH8cK047h5w" base_Element="_Re6lUg6SEeWoH8cK047h5w"/>
</xmi:XMI>
